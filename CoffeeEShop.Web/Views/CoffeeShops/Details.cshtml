@model CoffeeEShop.Domain.ViewModels.ShopDetailsViewModel

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    .shop-details {
        background-color: #fdf6f0; /* beige */
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-bottom: 30px;
    }

        .shop-details h4 {
            color: #6f4e37; /* brown */
            margin-bottom: 10px;
        }

        .shop-details dl dt {
            font-weight: bold;
            color: #3e2c20;
        }

        .shop-details dl dd {
            margin-bottom: 10px;
            color: #3e2c20;
        }

    .menu-section {
        margin-top: 30px;
    }

    .menu-card {
        background-color: #fff8f0; /* light beige */
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        display: flex;
        gap: 15px;
        align-items: center;
    }

        .menu-card img {
            width: 120px;
            height: 100px;
            object-fit: cover;
            border-radius: 5px;
        }

    .menu-card-info {
        flex-grow: 1;
    }

        .menu-card-info h5 {
            margin: 0;
            color: #6f4e37;
        }

        .menu-card-info p {
            margin: 5px 0 0;
            font-weight: bold;
            color: #c49e76;
        }

    .menu-card-buttons {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    .btn-add-order {
        background-color: #6f4e37; /* dark brown */
        color: #fdf6f0; /* beige */
        border: none;
        padding: 6px 12px;
        border-radius: 5px;
        font-size: 0.9rem;
        text-decoration: none;
        text-align: center;
    }

        .btn-add-order:hover {
            opacity: 0.9;
        }

    .shop-actions {
        margin-top: 20px;
        display: flex;
        gap: 10px;
    }

        .shop-actions a {
            text-decoration: none;
            padding: 6px 12px;
            border-radius: 5px;
            font-size: 0.9rem;
            color: #fdf6f0;
        }

    .btn-edit {
        background-color: #6f4e37;
    }

    .btn-back {
        background-color: #c49e76;
    }

</style>

<div class="shop-details">
    <h4>@Model.Shop.Name</h4>
    <dl class="row">
        <dt class="col-sm-2">Address</dt>
        <dd class="col-sm-10">@Model.Shop.Address</dd>

        <dt class="col-sm-2">Rating</dt>
        <dd class="col-sm-10">@Model.Shop.Rating</dd>
    </dl>
</div>

<div class="menu-section">
    <h4>Menu</h4>

    @if (Model.Products.Any())
    {
        @foreach (var product in Model.Products)
        {
            <div class="menu-card">
                @if (!string.IsNullOrEmpty(product.Image))
                {
                    <img src="@product.Image" alt="@product.Name" />
                }
                <div class="menu-card-info">
                    <h5>@product.Name</h5>
                    <p>$@product.Price</p>
                </div>
                <div class="menu-card-buttons">
                    <a asp-controller="Products" asp-action="AddProductToOrder" asp-route-id="@product.Id" class="btn-add-order">Add to order</a>
                </div>
            </div>
        }
    }
    else
    {
        <p>No products available for this shop.</p>
    }
</div>

<div class="shop-actions">
    <a asp-action="Edit" asp-route-id="@Model?.Shop.Id" class="btn-edit">Edit Shop</a>
    <a asp-action="Index" class="btn-back">Back to List</a>
    <a asp-controller="Products" asp-action="Create" asp-route-shopId="@Model.Shop.Id" class="btn-add-order">Add Product</a>
</div>

<hr />
<h4>Add Product to This Shop</h4>

<form asp-action="AddProductToShop" method="post" class="form-inline">
    <input type="hidden" name="shopId" value="@Model.Shop.Id" />

    <div class="form-group me-2">
        <select id="productId" name="productId" class="form-control">
            @foreach (var product in ViewBag.AllProducts as List<CoffeeEShop.Domain.DomainModels.Product>)
            {
                <option value="@product.Id">@product.Name - @product.Price$</option>
            }
        </select>
    </div>

    <button type="submit" class="btn btn-coffee">➕ Add</button>
</form>